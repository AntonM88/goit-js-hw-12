{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com/api/';\n\nexport const userParams = {\n  query: '',\n  page: 1,\n  perPage: 15,\n  maxPAge: '',\n};\n\nexport function fetchImages() {\n  const params = {\n    params: {\n      key: '43998127-099fd85a2e7628fabdc2ccde0',\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      q: userParams.query,\n      page: userParams.page,\n      per_page: userParams.perPage,\n    },\n  };\n\n  return axios.get('', params);\n}\n","export function imagesTemplate(arr) {\n  return arr.map(imgTemplate).join('');\n}\n\nfunction imgTemplate(img) {\n  return `<li class=\"gallery-item\">\n<div class='gallery'>\n  <a class=\"img-link\" href=\"${img.largeImageURL}\">\n    <img class=\"img-item\" src=\"${img.webformatURL}\" alt=\"${img.tags}\" />\n  </a>\n</div>\n<div class='text-box'>\n        <p class=\"text\">Likes ${img.likes}</p>\n        <p class=\"text\">Views ${img.views}</p>\n        <p class=\"text\">Comments ${img.comments}</p>\n        <p class=\"text\">Downloads ${img.downloads}</p>\n  </div>\n</li>`;\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { fetchImages, userParams } from './js/pixabay-api';\n\nimport { imagesTemplate } from './js/render-functions';\n\nlet lightbox = new SimpleLightbox('.js-gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nconst refs = {\n  formEl: document.querySelector('.js-form'),\n  inputEl: document.querySelector('.js-input'),\n  galleryEl: document.querySelector('.js-gallery'),\n  loader: document.querySelector('.loader'),\n  btnLoad: document.querySelector('.js-btn-load'),\n};\n\nrefs.formEl.addEventListener('submit', handleSubmit);\nrefs.btnLoad.addEventListener('click', onLoad);\n\nasync function handleSubmit(e) {\n  e.preventDefault();\n\n  refs.galleryEl.innerHTML = '';\n  userParams.query = e.target.elements.query.value.trim();\n  userParams.page = 1;\n\n  showLoader();\n\n  if (userParams.query === '') {\n    noImageMessage('Please enter a search query', 'tomato');\n\n    hideLoader();\n    return;\n  }\n\n  await renderImg(userParams.query);\n\n  e.target.reset();\n}\n\nasync function renderImg() {\n  try {\n    const {\n      data: { hits },\n    } = await fetchImages(userParams.query);\n    showBtnLoad();\n    if (hits.length === 0) {\n      hideBtnLoad();\n      noImageMessage(\n        'Sorry, there are no images matching your search query. Please try again!',\n        'red'\n      );\n\n      return;\n    }\n\n    refs.galleryEl.innerHTML = imagesTemplate(hits);\n\n    const liEl = refs.inputEl.firstChild;\n\n    lightbox.refresh();\n  } catch (error) {\n    console.log(error);\n  } finally {\n    hideLoader();\n  }\n}\n\nasync function onLoad() {\n  showLoader();\n  userParams.page += 1;\n  try {\n    const {\n      data: { hits },\n    } = await fetchImages();\n\n    if (hits.length === 0) {\n      noImageMessage(\n        'We are sorry, but you`ve reached the end of search results',\n        'DeepSkyBlue'\n      );\n\n      hideBtnLoad();\n\n      return;\n    }\n\n    refs.galleryEl.insertAdjacentHTML('beforeend', imagesTemplate(hits));\n    scrollPage();\n\n    lightbox.refresh();\n  } catch (error) {\n    noImageMessage('Error', 'red');\n  } finally {\n    hideLoader();\n    scrollPage();\n  }\n}\n\n// ==================\n\nfunction noImageMessage(message, backgroundColor) {\n  iziToast.error({\n    title: '',\n    message,\n    position: 'topRight',\n    backgroundColor,\n    messageColor: 'white',\n  });\n}\n\n// ==================\n\nfunction showLoader() {\n  refs.loader.classList.remove('is-hidden');\n}\n\nfunction hideLoader() {\n  refs.loader.classList.add('is-hidden');\n}\n\n// ==================\n\nfunction showBtnLoad() {\n  refs.btnLoad.classList.remove('is-hidden');\n}\n\nfunction hideBtnLoad() {\n  refs.btnLoad.classList.add('is-hidden');\n}\n\n// ==================\n\nfunction scrollPage() {\n  const liEl = refs.galleryEl.firstChild;\n  const height = liEl.getBoundingClientRect().height;\n\n  window.scrollBy({\n    top: height * 2,\n    behavior: 'smooth',\n  });\n}\n"],"names":["axios","userParams","fetchImages","params","imagesTemplate","arr","imgTemplate","img","lightbox","SimpleLightbox","refs","handleSubmit","onLoad","showLoader","noImageMessage","hideLoader","renderImg","hits","showBtnLoad","hideBtnLoad","liEl","error","scrollPage","message","backgroundColor","iziToast","height"],"mappings":"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"}